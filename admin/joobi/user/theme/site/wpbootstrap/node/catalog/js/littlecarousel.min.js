/*!
 * jCarousel - Riding carousels with jQuery
 *   http://sorgalla.com/jcarousel/
 *
 * Copyright (c) 2006 Jan Sorgalla (http://sorgalla.com)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Built on top of the jQuery library
 *   http://jquery.com
 *
 * Inspired by the "Carousel Component" by Bill Scott
 *   http://billwscott.com/carousel/
 */
(function(f){var e={vertical:!1,rtl:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},h=!1;f(window).bind("load.jcarousel",function(){h=!0}),f.jcarousel=function(t,s){this.options=f.extend({},e,s||{}),this.locked=!1,this.autoStopped=!1,this.container=null,this.clip=null,this.list=null,this.buttonNext=null,this.buttonPrev=null,this.buttonNextState=null,this.buttonPrevState=null,s&&void 0!==s.rtl||(this.options.rtl="rtl"==(f(t).attr("dir")||f("html").attr("dir")||"").toLowerCase()),this.wh=this.options.vertical?"height":"width",this.lt=this.options.vertical?"top":this.options.rtl?"right":"left";for(var r="",q=t.className.split(" "),p=0;q.length>p;p++){if(-1!=q[p].indexOf("jcarousel-skin")){f(t).removeClass(q[p]),r=q[p];break}}"UL"==t.nodeName.toUpperCase()||"OL"==t.nodeName.toUpperCase()?(this.list=f(t),this.clip=this.list.parents(".jcarousel-clip"),this.container=this.list.parents(".jcarousel-container")):(this.container=f(t),this.list=this.container.find("ul,ol").eq(0),this.clip=this.container.find(".jcarousel-clip")),0===this.clip.size()&&(this.clip=this.list.wrap("<div></div>").parent()),0===this.container.size()&&(this.container=this.clip.wrap("<div></div>").parent()),""!==r&&-1==this.container.parent()[0].className.indexOf("jcarousel-skin")&&this.container.wrap('<div class=" '+r+'"></div>'),this.buttonPrev=f(".jcarousel-prev",this.container),0===this.buttonPrev.size()&&null!==this.options.buttonPrevHTML&&(this.buttonPrev=f(this.options.buttonPrevHTML).appendTo(this.container)),this.buttonPrev.addClass(this.className("jcarousel-prev")),this.buttonNext=f(".jcarousel-next",this.container),0===this.buttonNext.size()&&null!==this.options.buttonNextHTML&&(this.buttonNext=f(this.options.buttonNextHTML).appendTo(this.container)),this.buttonNext.addClass(this.className("jcarousel-next")),this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"}),this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0),this.container.addClass(this.className("jcarousel-container")).css({position:"relative"}),!this.options.vertical&&this.options.rtl&&this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl");var o=null!==this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,d=this.list.children("li"),c=this;if(d.size()>0){var b=0,a=this.options.offset;d.each(function(){c.format(this,a++),b+=c.dimension(this,o)}),this.list.css(this.wh,b+100+"px"),s&&void 0!==s.size||(this.options.size=d.size())}this.container.css("display","block"),this.buttonNext.css("display","block"),this.buttonPrev.css("display","block"),this.funcNext=function(){return c.next(),!1},this.funcPrev=function(){return c.prev(),!1},this.funcResize=function(){c.resizeTimer&&clearTimeout(c.resizeTimer),c.resizeTimer=setTimeout(function(){c.reload()},100)},null!==this.options.initCallback&&this.options.initCallback(this,"init"),!h&&g.isSafari()?(this.buttons(!1,!1),f(window).bind("load.jcarousel",function(){c.setup()})):this.setup()};var g=f.jcarousel;g.fn=g.prototype={jcarousel:"0.2.9"},g.fn.extend=g.extend=f.extend,g.fn.extend({setup:function(){if(this.first=null,this.last=null,this.prevFirst=null,this.prevLast=null,this.animating=!1,this.timer=null,this.resizeTimer=null,this.tail=null,this.inTail=!1,!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var a=this.pos(this.options.start,!0);this.prevFirst=this.prevLast=null,this.animate(a,!1),f(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize),null!==this.options.setupCallback&&this.options.setupCallback(this)}},reset:function(){this.list.empty(),this.list.css(this.lt,"0px"),this.list.css(this.wh,"10px"),null!==this.options.initCallback&&this.options.initCallback(this,"reset"),this.setup()},reload:function(){if(null!==this.tail&&this.inTail&&this.list.css(this.lt,g.intval(this.list.css(this.lt))+this.tail),this.tail=null,this.inTail=!1,null!==this.options.reloadCallback&&this.options.reloadCallback(this),null!==this.options.visible){var i=this,d=Math.ceil(this.clipping()/this.options.visible),k=0,j=0;this.list.children("li").each(function(a){k+=i.dimension(this,d),i.first>a+1&&(j=k)}),this.list.css(this.wh,k+"px"),this.list.css(this.lt,-j+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0,this.buttons()},unlock:function(){this.locked=!1,this.buttons()},size:function(b){return void 0!==b&&(this.options.size=b,this.locked||this.buttons()),this.options.size},has:function(j,i){void 0!==i&&i||(i=j),null!==this.options.size&&i>this.options.size&&(i=this.options.size);for(var l=j;i>=l;l++){var k=this.get(l);if(!k.length||k.hasClass("jcarousel-item-placeholder")){return !1}}return !0},get:function(a){return f(">.jcarousel-item-"+a,this.list)},add:function(r,q){var p=this.get(r),o=0,n=f(q);if(0===p.length){var m,l=g.intval(r);for(p=this.create(r);;){if(m=this.get(--l),0>=l||m.length){0>=l?this.list.prepend(p):m.after(p);break}}}else{o=this.dimension(p)}"LI"==n.get(0).nodeName.toUpperCase()?(p.replaceWith(n),p=n):p.empty().append(q),this.format(p.removeClass(this.className("jcarousel-item-placeholder")),r);var d=null!==this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,a=this.dimension(p,d)-o;return r>0&&this.first>r&&this.list.css(this.lt,g.intval(this.list.css(this.lt))-a+"px"),this.list.css(this.wh,g.intval(this.list.css(this.wh))+a+"px"),p},remove:function(i){var d=this.get(i);if(d.length&&!(i>=this.first&&this.last>=i)){var j=this.dimension(d);this.first>i&&this.list.css(this.lt,g.intval(this.list.css(this.lt))+j+"px"),d.remove(),this.list.css(this.wh,g.intval(this.list.css(this.wh))-j+"px")}},next:function(){null===this.tail||this.inTail?this.scroll("both"!=this.options.wrap&&"last"!=this.options.wrap||null===this.options.size||this.last!=this.options.size?this.first+this.options.scroll:1):this.scrollTail(!1)},prev:function(){null!==this.tail&&this.inTail?this.scrollTail(!0):this.scroll("both"!=this.options.wrap&&"first"!=this.options.wrap||null===this.options.size||1!=this.first?this.first-this.options.scroll:this.options.size)},scrollTail:function(d){if(!this.locked&&!this.animating&&this.tail){this.pauseAuto();var c=g.intval(this.list.css(this.lt));c=d?c+this.tail:c-this.tail,this.inTail=!d,this.prevFirst=this.first,this.prevLast=this.last,this.animate(c)}},scroll:function(d,c){this.locked||this.animating||(this.pauseAuto(),this.animate(this.pos(d),c))},pos:function(N,M){var L=g.intval(this.list.css(this.lt));if(this.locked||this.animating){return L}"circular"!=this.options.wrap&&(N=1>N?1:this.options.size&&N>this.options.size?this.options.size:N);for(var C,K=this.first>N,J="circular"!=this.options.wrap&&1>=this.first?1:this.first,I=K?this.get(J):this.get(this.last),H=K?J:J-1,G=null,F=0,E=!1,D=0;K?--H>=N:N>++H;){G=this.get(H),E=!G.length,0===G.length&&(G=this.create(H).addClass(this.className("jcarousel-item-placeholder")),I[K?"before":"after"](G),null!==this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(0>=H||H>this.options.size)&&(C=this.get(this.index(H)),C.length&&(G=this.add(H,C.clone(!0))))),I=G,D=this.dimension(G),E&&(F+=D),null!==this.first&&("circular"==this.options.wrap||H>=1&&(null===this.options.size||this.options.size>=H))&&(L=K?L+D:L-D)}var B=this.clipping(),A=[],z=0,y=0;for(I=this.get(N-1),H=N;++z;){if(G=this.get(H),E=!G.length,0===G.length&&(G=this.create(H).addClass(this.className("jcarousel-item-placeholder")),0===I.length?this.list.prepend(G):I[K?"before":"after"](G),null!==this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(0>=H||H>this.options.size)&&(C=this.get(this.index(H)),C.length&&(G=this.add(H,C.clone(!0))))),I=G,D=this.dimension(G),0===D){throw Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...")}if("circular"!=this.options.wrap&&null!==this.options.size&&H>this.options.size?A.push(G):E&&(F+=D),y+=D,y>=B){break}H++}for(var x=0;A.length>x;x++){A[x].remove()}F>0&&(this.list.css(this.wh,this.dimension(this.list)+F+"px"),K&&(L-=F,this.list.css(this.lt,g.intval(this.list.css(this.lt))-F+"px")));var w=N+z-1;if("circular"!=this.options.wrap&&this.options.size&&w>this.options.size&&(w=this.options.size),H>w){for(z=0,H=w,y=0;++z&&(G=this.get(H--),G.length)&&(y+=this.dimension(G),!(y>=B));){}}var v=w-z+1;if("circular"!=this.options.wrap&&1>v&&(v=1),this.inTail&&K&&(L+=this.tail,this.inTail=!1),this.tail=null,"circular"!=this.options.wrap&&w==this.options.size&&w-z+1>=1){var d=g.intval(this.get(w).css(this.options.vertical?"marginBottom":"marginRight"));y-d>B&&(this.tail=y-B-d)}for(M&&N===this.options.size&&this.tail&&(L-=this.tail,this.inTail=!0);N-->v;){L+=this.dimension(this.get(N))}return this.prevFirst=this.first,this.prevLast=this.last,this.first=v,this.last=w,L},animate:function(a,m){if(!this.locked&&!this.animating){this.animating=!0;var l=this,k=function(){if(l.animating=!1,0===a&&l.list.css(l.lt,0),!l.autoStopped&&("circular"==l.options.wrap||"both"==l.options.wrap||"last"==l.options.wrap||null===l.options.size||l.last<l.options.size||l.last==l.options.size&&null!==l.tail&&!l.inTail)&&l.startAuto(),l.buttons(),l.notify("onAfterAnimation"),"circular"==l.options.wrap&&null!==l.options.size){for(var b=l.prevFirst;l.prevLast>=b;b++){null===b||b>=l.first&&l.last>=b||!(1>b||b>l.options.size)||l.remove(b)}}};if(this.notify("onBeforeAnimation"),this.options.animation&&m!==!1){var j=this.options.vertical?{top:a}:this.options.rtl?{right:a}:{left:a},i={duration:this.options.animation,easing:this.options.easing,complete:k};f.isFunction(this.options.animationStepCallback)&&(i.step=this.options.animationStepCallback),this.list.animate(j,i)}else{this.list.css(this.lt,a+"px"),k()}}},startAuto:function(d){if(void 0!==d&&(this.options.auto=d),0===this.options.auto){return this.stopAuto()}if(null===this.timer){this.autoStopped=!1;var c=this;this.timer=window.setTimeout(function(){c.next()},1000*this.options.auto)}},stopAuto:function(){this.pauseAuto(),this.autoStopped=!0},pauseAuto:function(){null!==this.timer&&(window.clearTimeout(this.timer),this.timer=null)},buttons:function(i,d){null==i&&(i=!this.locked&&0!==this.options.size&&(this.options.wrap&&"first"!=this.options.wrap||null===this.options.size||this.last<this.options.size),this.locked||this.options.wrap&&"first"!=this.options.wrap||null===this.options.size||!(this.last>=this.options.size)||(i=null!==this.tail&&!this.inTail)),null==d&&(d=!this.locked&&0!==this.options.size&&(this.options.wrap&&"last"!=this.options.wrap||this.first>1),this.locked||this.options.wrap&&"last"!=this.options.wrap||null===this.options.size||1!=this.first||(d=null!==this.tail&&this.inTail));var j=this;this.buttonNext.size()>0?(this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext),i&&this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext),this.buttonNext[i?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",i?!1:!0),null!==this.options.buttonNextCallback&&this.buttonNext.data("jcarouselstate")!=i&&this.buttonNext.each(function(){j.options.buttonNextCallback(j,this,i)}).data("jcarouselstate",i)):null!==this.options.buttonNextCallback&&this.buttonNextState!=i&&this.options.buttonNextCallback(j,null,i),this.buttonPrev.size()>0?(this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),d&&this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),this.buttonPrev[d?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",d?!1:!0),null!==this.options.buttonPrevCallback&&this.buttonPrev.data("jcarouselstate")!=d&&this.buttonPrev.each(function(){j.options.buttonPrevCallback(j,this,d)}).data("jcarouselstate",d)):null!==this.options.buttonPrevCallback&&this.buttonPrevState!=d&&this.options.buttonPrevCallback(j,null,d),this.buttonNextState=i,this.buttonPrevState=d},notify:function(d){var c=null===this.prevFirst?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",d,c),this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",d,c,this.first),this.callback("itemFirstOutCallback",d,c,this.prevFirst)),this.prevLast!==this.last&&(this.callback("itemLastInCallback",d,c,this.last),this.callback("itemLastOutCallback",d,c,this.prevLast)),this.callback("itemVisibleInCallback",d,c,this.first,this.last,this.prevFirst,this.prevLast),this.callback("itemVisibleOutCallback",d,c,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(v,u,t,s,r,q,p){if(null!=this.options[v]&&("object"==typeof this.options[v]||"onAfterAnimation"==u)){var o="object"==typeof this.options[v]?this.options[v][u]:this.options[v];if(f.isFunction(o)){var n=this;if(void 0===s){o(n,t,u)}else{if(void 0===r){this.get(s).each(function(){o(n,this,s,t,u)})}else{for(var m=function(b){n.get(b).each(function(){o(n,this,b,t,u)})},a=s;r>=a;a++){null===a||a>=q&&p>=a||m(a)}}}}}},create:function(b){return this.format("<li></li>",b)},format:function(a,k){a=f(a);for(var j=a.get(0).className.split(" "),i=0;j.length>i;i++){-1!=j[i].indexOf("jcarousel-")&&a.removeClass(j[i])}return a.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+k)).css({"float":this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",k),a},className:function(b){return b+" "+b+(this.options.vertical?"-vertical":"-horizontal")},dimension:function(a,j){var i=f(a);if(null==j){return this.options.vertical?i.innerHeight()+g.intval(i.css("margin-top"))+g.intval(i.css("margin-bottom"))+g.intval(i.css("border-top-width"))+g.intval(i.css("border-bottom-width"))||g.intval(this.options.itemFallbackDimension):i.innerWidth()+g.intval(i.css("margin-left"))+g.intval(i.css("margin-right"))+g.intval(i.css("border-left-width"))+g.intval(i.css("border-right-width"))||g.intval(this.options.itemFallbackDimension)}var d=this.options.vertical?j-g.intval(i.css("marginTop"))-g.intval(i.css("marginBottom")):j-g.intval(i.css("marginLeft"))-g.intval(i.css("marginRight"));return f(i).css(this.wh,d+"px"),this.dimension(i)},clipping:function(){return this.options.vertical?this.clip[0].offsetHeight-g.intval(this.clip.css("borderTopWidth"))-g.intval(this.clip.css("borderBottomWidth")):this.clip[0].offsetWidth-g.intval(this.clip.css("borderLeftWidth"))-g.intval(this.clip.css("borderRightWidth"))},index:function(d,c){return null==c&&(c=this.options.size),Math.round(((d-1)/c-Math.floor((d-1)/c))*c)+1}}),g.extend({defaults:function(a){return f.extend(e,a||{})},intval:function(b){return b=parseInt(b,10),isNaN(b)?0:b},windowLoaded:function(){h=!0},isSafari:function(){var i=navigator.userAgent.toLowerCase(),d=/(chrome)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||[],j=d[1]||"";return"webkit"===j}}),f.fn.jcarousel=function(a){if("string"==typeof a){var i=f(this).data("jcarousel"),d=Array.prototype.slice.call(arguments,1);return i[a].apply(i,d)}return this.each(function(){var b=f(this).data("jcarousel");b?(a&&f.extend(b.options,a),b.reload()):f(this).data("jcarousel",new g(this,a))})}})(jQuery);